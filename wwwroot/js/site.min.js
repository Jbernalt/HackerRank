function appendTableRow(n){let t=document.createElement("td");return t.append(n),t}$("input.IsChecked").on("click",function(){$(".IsChecked:checked").length>4&&(this.checked=!1)});var liveFeedHubconnection=(new signalR.HubConnectionBuilder).withUrl("/LiveFeedHub").build();liveFeedHubconnection.on("ReceiveMessage",function(n){let t=JSON.parse(n),e=t.LiveFeedMessage,o=t.TopFiveGroups,s=t.TopFiveUsers,u=t.TopFiveUserLevels,i=$("#live_feed_article ul").children();i.length>=5&&i.last().remove();let r=document.createElement("li"),f=new Date;r.textContent=e+f.toDateString()+" at "+f.toLocaleTimeString("sv-SE");r.classList.add("list-group-item");i.length==0?document.getElementById("live_feed").appendChild(r):$(r).insertBefore(i.first());$("#userTableBody").empty();$("#groupTableBody").empty();for(let n of s){let i=document.createElement("img");i.src=n.ProfileImage=="default-profile-picture.png"?"../img/"+n.ProfileImage:"../profileImg/"+n.ProfileImage;i.style="height: 50px; width: 50px; border-radius: 50%";i.alt="profile-image";let r=document.createElement("a");r.innerHTML=n.Username;let u=window.location.protocol+"//"+window.location.host+"/";r.href=u+"user/profile/"+n.Username;r.className="nav-link px-0 py-0 my-0 mx-0";let t=document.createElement("tr");t.append(appendTableRow(i));t.append(appendTableRow(r));t.append(appendTableRow(n.Commits));t.append(appendTableRow(n.IssuesCreated));t.append(appendTableRow(n.IssuesSolved));t.append(appendTableRow(n.MergeRequest));t.append(appendTableRow(n.Comments));t.append(appendTableRow(Number(n.DailyRating).toFixed(2)));$("#userTableBody").append(t)}for(let n of o)$("#groupTableBody").append("<tr><td>"+n.GroupName+"<\/td><td>"+n.CommitsDaily+"<\/td><td>"+n.IssuesCreatedDaily+"<\/td><td>"+n.IssuesSolvedDaily+"<\/td><td>"+n.MergeRequestsDaily+"<\/td><td>"+n.CommentsDaily+"<\/td><td>"+Number(n.GroupDailyRating).toFixed(2)+"<\/td><\/tr>");if(u.length!=0){$("#levelTableBody").empty();for(let n of u){let i=document.createElement("img");i.src=n.ProfileImage=="default-profile-picture.png"?"../img/"+n.ProfileImage:"../profileImg/"+n.ProfileImage;i.style="height: 50px; border-radius: 50%";i.alt="profile-image";let r=document.createElement("a");r.innerHTML=n.Username;let o=window.location.protocol+"//"+window.location.host+"/";r.href=o+"user/profile/"+n.Username;r.className="nav-link px-0 py-0 my-0 mx-0";let f=Number((n.CurrentExperience-n.Level.XpNeeded)*10).toFixed(2).toString()+"%",u=$('<div class="progress position-relative">')[0],s=$('<div class="progress-bar" style="width:'+f+'; background-color: skyblue" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10">')[0],e=$('<small class="justify-content-center d-flex position-absolute w-100 text-dark">')[0];e.innerHTML=f;u.append(s);u.append(e);let t=document.createElement("tr");t.append(appendTableRow(i));t.append(appendTableRow(r));t.append(appendTableRow(n.PrestigeLevel));t.append(appendTableRow("Level  "+n.Level.LevelId+" "+n.Level.LevelName));t.append(appendTableRow(u));$("#levelTableBody").append(t)}}});liveFeedHubconnection.start().catch(function(n){return console.error(n.toString())});$(function(){$("#dropdownMenuButton").keyup(function(){document.getElementById("dropdownMenu").innerText="";let n=$("#dropdownMenuButton").val();$.ajax({type:"POST",url:"/search/"+n,data:n,datatype:"json",success:function(n){if(n==0){let n=document.createElement("a");n.innerHTML="No users found";n.classList.add("dropdown-item");document.getElementById("dropdownMenu").appendChild(n)}else $.each(n,function(){let n=document.createElement("a");n.innerHTML=this;let t=window.location.protocol+"//"+window.location.host+"/";n.href=t+"user/profile/"+this;n.classList.add("dropdown-item");document.getElementById("dropdownMenu").appendChild(n)})}})})});